# =============================================================================
# CORE BOT
# =============================================================================
TELEGRAM_BOT_TOKEN=                       # Required: Bot token from @BotFather
TELEGRAM_WEBHOOK_SECRET=                  # Optional: Telegram secret token for webhook validation
TELEGRAM_WEBHOOK_URL=                     # Optional: Pre-configured webhook URL (production)
ENVIRONMENT=development                   # development | production | testing
HOST=0.0.0.0                              # Bind host for FastAPI
PORT=8000                                 # HTTP port for FastAPI/uvicorn
LOG_LEVEL=INFO                            # DEBUG | INFO | WARNING | ERROR
DEBUG=false                               # Extra logging in handlers
DATABASE_URL=sqlite+aiosqlite:///./data/telegram_agent.db

# =============================================================================
# LLMs & MODELS
# =============================================================================
OPENAI_API_KEY=                           # Optional: OpenAI (vision/LLM)
GROQ_API_KEY=                             # Optional: Groq (Whisper, image classifier)
ANTHROPIC_API_KEY=                        # Optional: Claude Code SDK
LLM_MODEL=gpt-4o-mini                     # Default LiteLLM model for completions
LLM_VERBOSE=false                         # Set true to enable LiteLLM verbose logging
EMBEDDING_MODEL=clip-ViT-B-32             # Embedding model for images/links

# =============================================================================
# CLAUDE CODE
# =============================================================================
CLAUDE_CODE_WORK_DIR=~/Research/vault     # Working directory for Claude Code sessions
CLAUDE_CODE_MODEL=sonnet                  # sonnet | opus | haiku
CLAUDE_QUERY_TIMEOUT=300                  # Seconds per Claude query
SESSION_IDLE_TIMEOUT_MINUTES=480          # Minutes before Claude session cleanup
# Tool access control (comma-separated Claude Code SDK tool names)
# Default: Read,Write,Edit,Glob,Grep,Bash
# Example read-only: CLAUDE_ALLOWED_TOOLS=Read,Glob,Grep
# CLAUDE_ALLOWED_TOOLS=Read,Write,Edit,Glob,Grep,Bash
# CLAUDE_DISALLOWED_TOOLS=WebFetch,WebSearch

# =============================================================================
# WEBHOOK SAFETY LIMITS
# =============================================================================
WEBHOOK_MAX_BODY_BYTES=1048576            # Max webhook payload (bytes)
WEBHOOK_RATE_LIMIT=120                    # Requests per IP window
WEBHOOK_RATE_WINDOW_SECONDS=60            # Window size (seconds)
WEBHOOK_MAX_CONCURRENCY=100               # In-flight webhook requests
WEBHOOK_USE_HTTPS=true                    # Enforce HTTPS webhook URLs (set false only for local tunnels)
# Admin/API guardrails
API_MAX_BODY_BYTES=1000000                # Max body for /api and /admin
API_BODY_LIMIT_TEST=0                     # Set 1 to enforce body limit during tests
WEBHOOK_RATE_LIMIT_TEST=0                 # Set 1 to enforce rate limit during tests

# =============================================================================
# MEDIA LIMITS
# =============================================================================
MAX_IMAGE_BYTES=6291456                   # 6 MB image cap
ALLOWED_IMAGE_EXTS=jpg,jpeg,png,webp

# =============================================================================
# PROACTIVE / SCHEDULERS
# =============================================================================
POLLING_ENABLED=true                      # Enable polling scheduler (fallback to webhook)
POLLING_CHAT_IDS=                         # Comma-separated chat IDs for polling mode
POLLING_INTERVAL_MINUTES=30               # Polling interval
TRAIL_REVIEW_ENABLED=true                 # Enable daily trail review pings
TRAIL_REVIEW_CHAT_ID=                     # Chat ID for trail reviews
TRAIL_REVIEW_TIMES=09:00,14:00,20:00      # Comma-separated HH:MM times

# =============================================================================
# PROACTIVE TASK KEYS (used by scheduled research jobs)
# =============================================================================
GOOGLE_API_KEY=                           # Required for Google Custom Search (image enrichment)
GOOGLE_SEARCH_CX=                         # Custom Search Engine ID
FIRECRAWL_API_KEY=                        # Firecrawl crawling/screenshot API

# =============================================================================
# TUNNELING / NETWORK
# =============================================================================
NGROK_PORT=8000                           # Local port for ngrok tunnel
WEBHOOK_BASE_URL=                         # Optional override for webhook base URL
HOSTNAME=                                 # Optional: container hostname for webhook IP discovery
RAILWAY_PUBLIC_DOMAIN=                    # Railway inferred domain (if deployed on Railway)
RAILWAY_SERVICE_URL=                      # Railway service URL
RAILWAY_STATIC_URL=                       # Railway static asset URL
RAILWAY_APP_URL=                          # Railway app URL

# =============================================================================
# IMAGE / PDF PIPELINE
# =============================================================================
ALLOW_CUSTOM_COMMANDS=false               # Worker queue guardrail
